<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dead Pixel Tester | SilenVault</title>
    <meta name="description" content="Free online dead pixel test. Check your monitor, laptop, or mobile screen for stuck or dead pixels in full-screen mode.">
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5449371042798610" crossorigin="anonymous"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="../assets/js/layout.js" defer></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #f8fafc; overflow-x: hidden; }
        .glass-panel { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(51, 65, 85, 0.5); }
        .mono { font-family: 'Fira Code', monospace; }

        /* Fullscreen Testing Canvas */
        #test-canvas {
            display: none; position: fixed; inset: 0; z-index: 9999;
            cursor: pointer; user-select: none;
        }

        /* Hide cursor when user stops moving it */
        .hide-cursor { cursor: none !important; }

        /* Subtle floating instruction during test */
        #test-hud {
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.6); color: white; padding: 8px 16px;
            border-radius: 20px; font-size: 12px; font-weight: bold; letter-spacing: 1px;
            text-transform: uppercase; pointer-events: none; opacity: 1;
            transition: opacity 1s; border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(4px);
        }

        .color-swatch { width: 24px; height: 24px; border-radius: 4px; display: inline-block; border: 1px solid rgba(255,255,255,0.2); }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <sv-header base-path=".."></sv-header>

    <main class="flex-1 max-w-[1200px] mx-auto w-full px-4 py-12 flex flex-col gap-8">
        
        <div class="text-center mb-4">
            <h1 class="text-3xl md:text-5xl font-bold text-white mb-4 tracking-tight">
                Screen <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">Pixel Tester</span>
            </h1>
            <p class="text-slate-400 max-w-lg mx-auto">
                Identify dead, stuck, or lit pixels on your monitor, tablet, or smartphone.
            </p>
        </div>

        <div class="glass-panel p-8 rounded-3xl border-slate-700 shadow-2xl text-center max-w-3xl mx-auto w-full">
            <div class="flex justify-center mb-6">
                <svg class="w-16 h-16 text-blue-500 opacity-80" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
            </div>
            
            <h2 class="text-2xl font-bold text-white mb-2">Ready to test your display?</h2>
            <p class="text-sm text-slate-400 mb-8 max-w-md mx-auto">
                Ensure your screen is clean before starting. The tool will enter full-screen mode and display pure RGB colors.
            </p>

            <button onclick="startTest()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold text-lg px-8 py-4 rounded-xl shadow-[0_0_20px_rgba(37,99,235,0.4)] transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(37,99,235,0.6)]">
                Start Pixel Test
            </button>

            <div class="mt-8 flex items-center justify-center gap-4 text-xs font-bold text-slate-500 uppercase tracking-widest">
                <span>Test Colors:</span>
                <div class="flex gap-2">
                    <div class="color-swatch" style="background: #ff0000;"></div>
                    <div class="color-swatch" style="background: #00ff00;"></div>
                    <div class="color-swatch" style="background: #0000ff;"></div>
                    <div class="color-swatch" style="background: #ffffff;"></div>
                    <div class="color-swatch" style="background: #000000;"></div>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-8 mt-4">
            <div class="lg:col-span-2 glass-panel p-8 rounded-2xl border-slate-800 prose prose-invert max-w-none">
                <h2 class="text-xl font-bold text-white mb-4">How to spot pixel defects</h2>
                <ul class="text-sm text-slate-400 leading-relaxed space-y-3">
                    <li><strong>Dead Pixels:</strong> These pixels are completely broken and receive no power. They will always appear as a black dot, which is most easily spotted on the <span class="text-white font-bold">White</span> test screen.</li>
                    <li><strong>Stuck (Hot) Pixels:</strong> These are sub-pixels (Red, Green, or Blue) that are permanently locked "On". You will spot them easily when testing against contrasting dark colors like <span class="text-black bg-slate-200 px-1 rounded font-bold">Black</span>.</li>
                    <li><strong>Navigation:</strong> Once the test starts, simply <span class="text-blue-400">Click</span>, <span class="text-blue-400">Tap</span>, or press the <span class="text-blue-400">Arrow Keys</span> to cycle through the diagnostic colors. Press <code>Esc</code> to exit.</li>
                </ul>
            </div>

            <div class="space-y-6">
                <div id="sidebar-ad-wrapper" class="hidden opacity-0 transition-opacity duration-1000">
                    <aside class="smart-ad-unit bg-slate-900/50 border border-slate-800 rounded-2xl flex flex-col items-center justify-center p-4 min-h-[250px]">
                        <span class="text-[10px] uppercase tracking-widest text-slate-600 block mb-2 pointer-events-none">Sponsored</span>
                        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5449371042798610" data-ad-slot="7594122081" data-ad-format="auto" data-full-width-responsive="true"></ins>
                        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                    </aside>
                </div>
            </div>
        </div>

    </main>

    <sv-footer base-path=".."></sv-footer>

    <div id="test-canvas" onclick="nextColor()">
        <div id="test-hud">Click or use Arrows to cycle â€¢ Press ESC to exit</div>
    </div>

    <script>
        const canvas = document.getElementById('test-canvas');
        const hud = document.getElementById('test-hud');
        
        // Diagnostic Colors: Red, Green, Blue, White, Black, Yellow, Cyan, Magenta
        const colors = ['#FF0000', '#00FF00', '#0000FF', '#FFFFFF', '#000000', '#FFFF00', '#00FFFF', '#FF00FF'];
        let currentIndex = 0;
        let mouseTimer = null;

        function startTest() {
            currentIndex = 0;
            updateCanvasColor();
            canvas.style.display = 'block';
            
            // Request Fullscreen (Cross-browser)
            if (canvas.requestFullscreen) {
                canvas.requestFullscreen();
            } else if (canvas.webkitRequestFullscreen) { /* Safari */
                canvas.webkitRequestFullscreen();
            } else if (canvas.msRequestFullscreen) { /* IE11 */
                canvas.msRequestFullscreen();
            }

            // Hide HUD after 3 seconds
            hud.style.opacity = '1';
            setTimeout(() => { hud.style.opacity = '0'; }, 3000);
        }

        function nextColor() {
            currentIndex++;
            if (currentIndex >= colors.length) {
                exitTest(); // End test if we cycled all colors
                return;
            }
            updateCanvasColor();
        }

        function prevColor() {
            currentIndex--;
            if (currentIndex < 0) currentIndex = colors.length - 1;
            updateCanvasColor();
        }

        function updateCanvasColor() {
            canvas.style.backgroundColor = colors[currentIndex];
            
            // Adjust HUD text color based on background so it's readable if triggered
            if(colors[currentIndex] === '#FFFFFF' || colors[currentIndex] === '#FFFF00' || colors[currentIndex] === '#00FFFF') {
                hud.style.color = 'black';
                hud.style.backgroundColor = 'rgba(255, 255, 255, 0.6)';
            } else {
                hud.style.color = 'white';
                hud.style.backgroundColor = 'rgba(0, 0, 0, 0.6)';
            }
        }

        function exitTest() {
            if (document.fullscreenElement) {
                document.exitFullscreen();
            }
            canvas.style.display = 'none';
        }

        // Listen for Fullscreen exit via ESC key
        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) {
                canvas.style.display = 'none';
            }
        });
        document.addEventListener('webkitfullscreenchange', () => {
            if (!document.webkitFullscreenElement) {
                canvas.style.display = 'none';
            }
        });

        // Keyboard Navigation during test
        document.addEventListener('keydown', (e) => {
            if (canvas.style.display === 'block') {
                if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') {
                    nextColor();
                } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                    prevColor();
                }
            }
        });

        // Hide Cursor on Idle (Architectural Polish)
        canvas.addEventListener('mousemove', () => {
            canvas.classList.remove('hide-cursor');
            clearTimeout(mouseTimer);
            mouseTimer = setTimeout(() => {
                canvas.classList.add('hide-cursor');
            }, 1500);
        });

        // Ad-Sensing Logic
        function monitorAds() {
            const adSlot = document.querySelector('#sidebar-ad-wrapper ins.adsbygoogle');
            const container = document.getElementById('sidebar-ad-wrapper');
            if (!adSlot) return;

            const observer = new MutationObserver(() => {
                if (adSlot.getAttribute('data-ad-status') === 'filled' || adSlot.innerHTML.includes('iframe')) {
                    container.classList.remove('hidden');
                    setTimeout(() => container.classList.add('opacity-100'), 50);
                    observer.disconnect();
                }
            });
            observer.observe(adSlot, { attributes: true, childList: true });
        }

        window.onload = () => {
            monitorAds();
        };
    </script>
</body>
</html>
